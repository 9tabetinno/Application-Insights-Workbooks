{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "a4b3932e-9ccf-4ffa-839a-ad3dc7137269",
            "version": "KqlParameterItem/1.0",
            "name": "timeRange",
            "label": "Time Range",
            "type": 4,
            "description": "Filter data by time range",
            "isRequired": true,
            "value": {
              "durationMs": 3600000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "timeContextFromParameter": "timeRange"
          },
          {
            "id": "d2876cbd-26c1-4c51-9e4a-81995456ff0b",
            "version": "KqlParameterItem/1.0",
            "name": "nodePool",
            "label": "Node Pool",
            "type": 5,
            "description": "Select desired node pool of this AKS cluster",
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "KubeNodeInventory   \r\n| extend labels=parse_json(Labels)\r\n| extend agentpool=tostring(['labels'][0]['agentpool'])\r\n| distinct agentpool",
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 3600000
            },
            "timeContextFromParameter": "timeRange",
            "defaultValue": "value::all",
            "queryType": 0,
            "resourceType": "microsoft.containerservice/managedclusters"
          }
        ],
        "style": "above",
        "queryType": 0,
        "resourceType": "microsoft.containerservice/managedclusters"
      },
      "name": "parameters - 0"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "8555c972-5cfb-40fe-88fc-ddfe4cffd375",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Cluster Pool Overview",
            "subTarget": "clusterOverview",
            "style": "link"
          },
          {
            "id": "aee16927-0441-4c69-83bd-ca252099589e",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Flink Cluster",
            "subTarget": "flink_cluster_tab",
            "style": "link"
          }
        ]
      },
      "name": "links - 1"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let trendBinSize = 1m;     \r\nlet MaxListSize = 1000;    \r\nlet materializedPerfData =\r\nPerf     \r\n| where ObjectName  == 'K8SNode'\r\n| summarize arg_max(TimeGenerated, *) by CounterName, Computer, bin(TimeGenerated, trendBinSize)         \r\n| where CounterName == 'cpuAllocatableNanoCores' or CounterName == 'cpuUsageNanoCores'// or CounterName == 'memoryRssBytes' or CounterName == 'memoryCapacityBytes'        \r\n| project TimeGenerated, Computer, CounterName, CounterValue\r\n| summarize StoredValue = max(CounterValue) by Computer, CounterName, bin(TimeGenerated, trendBinSize);\r\n\r\nKubeNodeInventory\r\n| extend labels=parse_json(Labels)\r\n| extend agentpool=tostring(['labels'][0]['agentpool'])\r\n| where agentpool in ({nodePool})\r\n| summarize arg_max(TimeGenerated, *) by Computer, bin(TimeGenerated, trendBinSize)     \r\n| join( \r\nmaterializedPerfData          \r\n| where CounterName == 'cpuAllocatableNanoCores' or CounterName == 'memoryCapacityBytes'\r\n| project Computer, CounterName = iif(CounterName == 'cpuAllocatableNanoCores', 'cpu', 'memory'), CapacityValue = StoredValue, TimeGenerated     \r\n) on Computer, TimeGenerated     \r\n| join kind=inner( \r\nmaterializedPerfData          \r\n| where CounterName == 'cpuUsageNanoCores' or CounterName == 'memoryRssBytes'         \r\n| project Computer, CounterName = iif(CounterName == 'cpuUsageNanoCores', 'cpu', 'memory'), UsageValue = StoredValue, TimeGenerated     \r\n) on Computer, CounterName, TimeGenerated     \r\n| project Computer, CounterName, TimeGenerated, UsagePercent = UsageValue * 100.0 / CapacityValue",
                    "size": 0,
                    "aggregation": 5,
                    "title": "Node CPU Utilization %",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "timeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.containerservice/managedclusters",
                    "visualization": "timechart",
                    "gridSettings": {
                      "filter": true
                    },
                    "chartSettings": {
                      "showLegend": true,
                      "ySettings": {
                        "numberFormatSettings": {
                          "unit": 1,
                          "options": {
                            "style": "decimal",
                            "useGrouping": true,
                            "maximumSignificantDigits": 3
                          }
                        }
                      }
                    }
                  },
                  "name": "node_cpu_utilization_percent_query"
                }
              ]
            },
            "customWidth": "50",
            "name": "node_cpu_group",
            "styleSettings": {
              "margin": "10",
              "padding": "10",
              "maxWidth": "50",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let trendBinSize = 1m;     \r\nlet MaxListSize = 1000;    \r\nlet materializedPerfData =\r\nPerf     \r\n| where ObjectName  == 'K8SNode'\r\n| summarize arg_max(TimeGenerated, *) by CounterName, Computer, bin(TimeGenerated, trendBinSize)         \r\n| where CounterName == 'memoryRssBytes' or CounterName == 'memoryCapacityBytes'        \r\n| project TimeGenerated, Computer, CounterName, CounterValue\r\n| summarize StoredValue = max(CounterValue) by Computer, CounterName, bin(TimeGenerated, trendBinSize);\r\n\r\nKubeNodeInventory    \r\n| extend labels=parse_json(Labels)\r\n| extend agentpool=tostring(['labels'][0]['agentpool'])\r\n| where agentpool in ({nodePool})\r\n| summarize arg_max(TimeGenerated, *) by Computer, bin(TimeGenerated, trendBinSize)     \r\n| join( \r\nmaterializedPerfData          \r\n| where CounterName == 'cpuAllocatableNanoCores' or CounterName == 'memoryCapacityBytes'\r\n| project Computer, CounterName = iif(CounterName == 'cpuAllocatableNanoCores', 'cpu', 'memory'), CapacityValue = StoredValue, TimeGenerated     \r\n) on Computer, TimeGenerated     \r\n| join kind=inner( \r\nmaterializedPerfData          \r\n| where CounterName == 'cpuUsageNanoCores' or CounterName == 'memoryRssBytes'         \r\n| project Computer, CounterName = iif(CounterName == 'cpuUsageNanoCores', 'cpu', 'memory'), UsageValue = StoredValue, TimeGenerated     \r\n) on Computer, CounterName, TimeGenerated     \r\n| project Computer, CounterName, TimeGenerated, UsagePercent = UsageValue * 100.0 / CapacityValue",
                    "size": 0,
                    "aggregation": 5,
                    "title": "Node Memory Utilization %",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "timeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.containerservice/managedclusters",
                    "visualization": "timechart",
                    "chartSettings": {
                      "yAxis": [
                        "UsagePercent"
                      ],
                      "showLegend": true,
                      "ySettings": {
                        "numberFormatSettings": {
                          "unit": 1,
                          "options": {
                            "style": "decimal",
                            "useGrouping": true,
                            "maximumSignificantDigits": 3
                          }
                        }
                      }
                    }
                  },
                  "name": "node_memory_utilization_percent_query"
                }
              ]
            },
            "customWidth": "50",
            "name": "node_memory_group",
            "styleSettings": {
              "margin": "10",
              "padding": "10",
              "maxWidth": "50",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let trendBinSize = 5m;     \r\nlet maxListSize = 1000;\r\nlet rawData =     \r\nKubeNodeInventory     \r\n| extend labels=parse_json(Labels)\r\n| extend agentpool=tostring(['labels'][0]['agentpool'])\r\n| where agentpool in ({nodePool})\r\n| distinct ClusterId, TimeGenerated     \r\n| summarize ClusterSnapshotCount = count() by Timestamp = bin(TimeGenerated, trendBinSize), ClusterId     \r\n| join hint.strategy=broadcast (         \r\n    KubeNodeInventory\r\n    | extend labels = parse_json(Labels)\r\n    | extend agentpool=tostring(['labels'][0]['agentpool'])\r\n    | where agentpool in ({nodePool})\r\n    | summarize TotalCount = count(), ReadyCount = sumif(1, Status contains ('Ready')) by ClusterId, Timestamp = bin(TimeGenerated, trendBinSize), agentpool\r\n    | extend NotReadyCount = TotalCount - ReadyCount     \r\n    ) on ClusterId, Timestamp     \r\n| project ClusterId, Timestamp,  agentpool,           \r\nTotalCount = todouble(TotalCount) / ClusterSnapshotCount,              \r\nReadyCount = todouble(ReadyCount) / ClusterSnapshotCount,               \r\nNotReadyCount = todouble(NotReadyCount) / ClusterSnapshotCount;  \r\n\r\nrawData     \r\n| order by Timestamp asc     \r\n//| summarize makelist(Timestamp, maxListSize),                 \r\n//makelist(TotalCount, maxListSize),                 \r\n//makelist(ReadyCount, maxListSize),                 \r\n//makelist(NotReadyCount, maxListSize)             \r\n//by ClusterId, agentpool \r\n//| project ClusterId, agentpool, list_Timestamp, list_TotalCount, list_ReadyCount, list_NotReadyCount\r\n",
                    "size": 0,
                    "aggregation": 5,
                    "title": "Node Count",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "timeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.containerservice/managedclusters",
                    "visualization": "timechart",
                    "gridSettings": {
                      "filter": true
                    },
                    "chartSettings": {
                      "showLegend": true
                    }
                  },
                  "name": "node_count_query"
                }
              ]
            },
            "customWidth": "50",
            "name": "node_count_group",
            "styleSettings": {
              "margin": "10",
              "padding": "10",
              "maxWidth": "50",
              "showBorder": true
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let trendBinSize = 5m;     \r\nlet maxListSize = 1000;         \r\nKubePodInventory     \r\n| distinct TimeGenerated, Namespace    \r\n| summarize ClusterSnapshotCount = count() by bin(TimeGenerated, trendBinSize), Namespace     \r\n| join hint.strategy=broadcast (         \r\nKubePodInventory\r\n| summarize PodStatus=any(PodStatus) by TimeGenerated, PodUid, Namespace       \r\n| summarize Total = count(),                     \r\nPending = sumif(1, PodStatus =~ 'Pending'),                     \r\nRunning = sumif(1, PodStatus =~ 'Running'),                     \r\nSucceeded = sumif(1, PodStatus =~ 'Succeeded'),                     \r\nFailed = sumif(1, PodStatus =~ 'Failed'),                     \r\nTerminating = sumif(1, PodStatus =~ 'Terminating')                  \r\nby Namespace, bin(TimeGenerated, trendBinSize)    \r\n) on Namespace, TimeGenerated\r\n| extend Unknown = Total - Pending - Running - Succeeded - Failed - Terminating     \r\n| project Namespace, Timestamp = TimeGenerated,              \r\nTotal = todouble(Total) / ClusterSnapshotCount,               \r\nPending = todouble(Pending) / ClusterSnapshotCount,               \r\nRunning = todouble(Running) / ClusterSnapshotCount,               \r\nSucceeded = todouble(Succeeded) / ClusterSnapshotCount,               \r\nFailed = todouble(Failed) / ClusterSnapshotCount,               \r\nTerminating = todouble(Terminating) / ClusterSnapshotCount,               \r\nUnknown = todouble(Unknown) / ClusterSnapshotCount",
                    "size": 0,
                    "aggregation": 5,
                    "title": "Active Pod Count",
                    "timeContext": {
                      "durationMs": 0
                    },
                    "timeContextFromParameter": "timeRange",
                    "queryType": 0,
                    "resourceType": "microsoft.containerservice/managedclusters",
                    "visualization": "timechart",
                    "gridSettings": {
                      "filter": true
                    },
                    "chartSettings": {
                      "showLegend": true
                    }
                  },
                  "name": "active_pod_count_query"
                }
              ]
            },
            "customWidth": "50",
            "name": "active_pod_group",
            "styleSettings": {
              "margin": "10",
              "padding": "10",
              "maxWidth": "50",
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "clusterOverview"
      },
      "name": "clusterOverview_group",
      "styleSettings": {
        "showBorder": true
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "4bf91b5b-4406-4813-8cd2-eccb737f3a41",
                  "version": "KqlParameterItem/1.0",
                  "name": "namespace",
                  "label": "Flink Namespace",
                  "type": 2,
                  "description": "Select namespaces of Flink cluster type",
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "KubePodInventory\r\n| distinct Namespace",
                  "value": [
                    "value::all"
                  ],
                  "typeSettings": {
                    "additionalResourceOptions": [
                      "value::all"
                    ],
                    "showDefault": false
                  },
                  "timeContext": {
                    "durationMs": 3600000
                  },
                  "timeContextFromParameter": "timeRange",
                  "defaultValue": "value::all",
                  "queryType": 0,
                  "resourceType": "microsoft.containerservice/managedclusters"
                }
              ],
              "style": "above",
              "queryType": 0,
              "resourceType": "microsoft.containerservice/managedclusters"
            },
            "name": "parameters - 0 - Copy"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Flink Cluster Stats",
              "expandable": true,
              "expanded": true,
              "items": [
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Task Manager Count",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "InsightsMetrics\r\n| where Namespace == \"prometheus\"\r\n| where Name == \"flink_jobmanager_numRegisteredTaskManagers\"\r\n| extend tags=parse_json(Tags)\r\n| extend  k8snm=tostring(['tags']['namespace'])\r\n| where k8snm in ({namespace})\r\n| project TimeGenerated, k8snm, Name, Val",
                          "size": 0,
                          "aggregation": 5,
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "timeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.containerservice/managedclusters",
                          "visualization": "timechart",
                          "chartSettings": {
                            "showLegend": true
                          }
                        },
                        "name": "flink_cluster_task_manager_count_query",
                        "styleSettings": {
                          "margin": "10",
                          "padding": "10",
                          "showBorder": true
                        }
                      }
                    ]
                  },
                  "customWidth": "50",
                  "name": "flink_task_manager_count_group",
                  "styleSettings": {
                    "maxWidth": "50"
                  }
                },
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "title": "Running Jobs Count",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "InsightsMetrics\r\n| where Namespace == \"prometheus\"\r\n| where Name == \"flink_jobmanager_numRunningJobs\"\r\n| extend tags=parse_json(Tags)\r\n| extend  k8snm=tostring(['tags']['namespace'])\r\n| where k8snm in ({namespace})\r\n| project TimeGenerated, k8snm, Name, Val",
                          "size": 0,
                          "aggregation": 5,
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "timeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.containerservice/managedclusters",
                          "visualization": "timechart",
                          "chartSettings": {
                            "showLegend": true
                          }
                        },
                        "name": "flink_cluster_stat_running_job_count_query",
                        "styleSettings": {
                          "showBorder": true
                        }
                      }
                    ]
                  },
                  "customWidth": "50",
                  "name": "flink_cluster_stat_running_jobs_count_group",
                  "styleSettings": {
                    "maxWidth": "50"
                  }
                }
              ]
            },
            "name": "flink_cluster_stat_group",
            "styleSettings": {
              "margin": "10",
              "padding": "10",
              "maxWidth": "50"
            }
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Flink JVM",
              "expandable": true,
              "expanded": true,
              "items": [
                {
                  "type": 12,
                  "content": {
                    "version": "NotebookGroup/1.0",
                    "groupType": "editable",
                    "items": [
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "InsightsMetrics\r\n| where Namespace == \"prometheus\"\r\n| where Name == \"flink_jobmanager_Status_JVM_CPU_Load\"\r\n| extend tags=parse_json(Tags)\r\n| extend k8snm=tostring(['tags']['namespace'])\r\n| where k8snm in ({namespace})\r\n| extend percentVal = Val*100\r\n| project TimeGenerated, k8snm, Name, percentVal",
                          "size": 0,
                          "aggregation": 5,
                          "title": "Job Manager JVM CPU Load",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "timeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.containerservice/managedclusters",
                          "visualization": "timechart",
                          "graphSettings": {
                            "type": 0,
                            "topContent": {
                              "columnMatch": "k8snm",
                              "formatter": 1
                            },
                            "centerContent": {
                              "columnMatch": "Val",
                              "formatter": 1,
                              "numberFormat": {
                                "unit": 17,
                                "options": {
                                  "maximumSignificantDigits": 3,
                                  "maximumFractionDigits": 2
                                }
                              }
                            }
                          },
                          "chartSettings": {
                            "xAxis": "TimeGenerated",
                            "yAxis": [
                              "percentVal"
                            ],
                            "showLegend": true,
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 17,
                                "options": {
                                  "style": "percent",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "flink_jobmanager_status_jvm_cpu_load_query",
                        "styleSettings": {
                          "margin": "10",
                          "padding": "10",
                          "maxWidth": "50",
                          "showBorder": true
                        }
                      },
                      {
                        "type": 3,
                        "content": {
                          "version": "KqlItem/1.0",
                          "query": "InsightsMetrics\r\n| where Namespace == \"prometheus\"\r\n| where Name == \"flink_taskmanager_Status_JVM_CPU_Load\"\r\n| extend tags=parse_json(Tags)\r\n| extend  k8snm=tostring(['tags']['namespace'])\r\n| where k8snm in ({namespace})\r\n| extend percentVal = Val*100\r\n| project TimeGenerated, k8snm, Name, percentVal",
                          "size": 0,
                          "aggregation": 5,
                          "title": "Task Manager JVM CPU Load",
                          "timeContext": {
                            "durationMs": 0
                          },
                          "timeContextFromParameter": "timeRange",
                          "queryType": 0,
                          "resourceType": "microsoft.containerservice/managedclusters",
                          "visualization": "timechart",
                          "chartSettings": {
                            "xAxis": "TimeGenerated",
                            "showLegend": true,
                            "ySettings": {
                              "numberFormatSettings": {
                                "unit": 0,
                                "options": {
                                  "style": "percent",
                                  "useGrouping": true
                                }
                              }
                            }
                          }
                        },
                        "customWidth": "50",
                        "name": "flink_taskmanager_status_jvm_cpu_load_query",
                        "styleSettings": {
                          "margin": "10",
                          "padding": "10",
                          "maxWidth": "50",
                          "showBorder": true
                        }
                      }
                    ]
                  },
                  "name": "flink_jvm_cpu_group"
                }
              ]
            },
            "name": "flink_cluster_jvm_group"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "flink_cluster_tab"
      },
      "name": "flink_cluster_group"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "InsightsMetrics\r\n| where Namespace == \"prometheus\"\r\n| where Name == \"flink_jobmanager_Status_JVM_CPU_Load\"\r\n| extend tags=parse_json(Tags)\r\n| extend k8snm=tostring(['tags']['namespace'])\r\n| where k8snm == \"flinkdemo\"\r\n| extend percentVal = Val*100\r\n| project TimeGenerated, k8snm, Name, percentVal",
              "size": 0,
              "aggregation": 5,
              "title": "Job Manager JVM CPU Load",
              "timeContext": {
                "durationMs": 0
              },
              "timeContextFromParameter": "timeRange",
              "queryType": 0,
              "resourceType": "microsoft.containerservice/managedclusters",
              "visualization": "timechart",
              "graphSettings": {
                "type": 0,
                "topContent": {
                  "columnMatch": "k8snm",
                  "formatter": 1
                },
                "centerContent": {
                  "columnMatch": "Val",
                  "formatter": 1,
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              },
              "chartSettings": {
                "xAxis": "TimeGenerated",
                "yAxis": [
                  "percentVal"
                ],
                "showLegend": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 17,
                    "options": {
                      "style": "percent",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "flink_jobmanager_Status_JVM_CPU_Load",
            "styleSettings": {
              "margin": "10",
              "padding": "10",
              "maxWidth": "50",
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "InsightsMetrics\r\n| where Namespace == \"prometheus\"\r\n| where Name == \"flink_taskmanager_Status_JVM_CPU_Load\"\r\n| extend tags=parse_json(Tags)\r\n| extend  k8snm=tostring(['tags']['namespace'])\r\n| where k8snm == \"flinkdemo\"\r\n| extend percentVal = Val*100\r\n| project TimeGenerated, k8snm, Name, percentVal",
              "size": 0,
              "aggregation": 5,
              "title": "Task Manager JVM CPU Load",
              "timeContext": {
                "durationMs": 0
              },
              "timeContextFromParameter": "timeRange",
              "queryType": 0,
              "resourceType": "microsoft.containerservice/managedclusters",
              "visualization": "timechart",
              "chartSettings": {
                "xAxis": "TimeGenerated",
                "showLegend": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "name": "flink_taskmanager_Status_JVM_CPU_Load",
            "styleSettings": {
              "margin": "10",
              "padding": "10",
              "maxWidth": "50",
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "jvmCpu"
      },
      "name": "jvmCpu"
    }
  ],
  "fallbackResourceIds": [
    "/subscriptions/c36fd9e7-e5b1-4d3e-bb85-2e538040258b/resourceGroups/SamsAcr/providers/Microsoft.ContainerService/managedClusters/samspooldemo1"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}