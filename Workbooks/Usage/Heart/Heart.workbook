{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "495f4050-6f47-4117-a855-427ef18dc154",
            "version": "KqlParameterItem/1.0",
            "name": "Time",
            "type": 2,
            "isRequired": true,
            "query": "let Table=datatable(value:timespan, text:string, item_order:long)[\r\n24h, 'Last 24 hours', 1,\r\n3d, 'Last 3 days', 2,\r\n7d, 'Last 7 days', 3,\r\n30d, 'Last 30 days', 4,\r\n60d, 'Last 60 days', 5,\r\n90d, 'Last 90 days', 5,\r\n];\r\nlet View_1 = view () { print value=startofmonth(now()), text=\"This calendar month\", item_order=6};\r\nlet View_2 = view () { print value=startofmonth(datetime_add(\"month\", -1, now())), text=\"Last 2 calendar months\", item_order=7};\r\nlet View_3 = view () { print value=startofmonth(datetime_add(\"month\", -2, now())), text=\"Last 3 calendar months\", item_order=8};\r\nlet View_6 = view () { print value=startofmonth(datetime_add(\"month\", -6, now())), text=\"Last 6 calendar months\", item_order=9};\r\nlet View_13 = view () { print value=startofmonth(datetime_add(\"month\", -13, now())), text=\"Last 13 calendar months\", item_order=10};\r\nTable\r\n| project value=now() - value, text, item_order\r\n| union View_1, View_2, View_3, View_6, View_13\r\n| order by item_order asc\r\n| project value, text",
            "value": "2021-03-01T00:00:00Z",
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "da97155d-2a5d-4bb5-a404-bbac696e48c7",
            "version": "KqlParameterItem/1.0",
            "name": "Country",
            "type": 2,
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "union pageViews, customEvents\r\n| summarize by client_CountryOrRegion\r\n| where isnotempty(client_CountryOrRegion)\r\n| project value=client_CountryOrRegion, label=client_CountryOrRegion, r=1\r\n| union (\r\ndatatable(value:string, label:string, r:long)[\r\n\"*\", \"All Countries\", 0\r\n])\r\n| order by r asc, label asc\r\n| project value, label",
            "value": [
              "*"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "6ffd17a5-c99f-4023-933f-bed2fb80797d",
            "version": "KqlParameterItem/1.0",
            "name": "OS",
            "label": "Operating System",
            "type": 2,
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "union pageViews, customEvents\r\n| summarize by client_OS\r\n| where isnotempty(client_OS)\r\n| project value=client_OS, label=client_OS, r=1\r\n| union (\r\ndatatable(value:string, label:string, r:long)[\r\n\"*\", \"All Operating Systems\", 0\r\n])\r\n| order by r asc, label asc\r\n| project value, label",
            "value": [
              "*"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          },
          {
            "id": "09eab8d5-23a9-43e8-8496-0405c2e457ce",
            "version": "KqlParameterItem/1.0",
            "name": "Browser",
            "type": 2,
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "query": "union pageViews, customEvents\r\n| summarize by client_Browser\r\n| where isnotempty(client_Browser)\r\n| project value=client_Browser, label=client_Browser, r=1\r\n| union (\r\ndatatable(value:string, label:string, r:long)[\r\n\"*\", \"All Browsers\", 0\r\n])\r\n| order by r asc, label asc\r\n| project value, label",
            "value": [
              "*"
            ],
            "typeSettings": {
              "additionalResourceOptions": [],
              "showDefault": false
            },
            "queryType": 0,
            "resourceType": "microsoft.insights/components"
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.insights/components"
      },
      "name": "TimeRange"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "ce75a159-b005-424e-ac71-bff10eed3b97",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Summary",
            "subTarget": "HEART Overview",
            "style": "link"
          },
          {
            "id": "27dab657-c150-47c5-8a5f-b73b0d1dc928",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Adoption",
            "subTarget": "Adoption",
            "style": "link"
          },
          {
            "id": "6e195d77-85b7-4889-a32c-86895244e337",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Engagement",
            "subTarget": "Engagement",
            "style": "link"
          },
          {
            "id": "574c36fc-3aa9-44e9-8f1b-0c44728ee02d",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Retention",
            "subTarget": "Retention",
            "style": "link"
          },
          {
            "id": "76c92d09-38fa-42c1-877a-9d73ce5a435c",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Task Success",
            "subTarget": "Task Success",
            "style": "link"
          },
          {
            "id": "f21fcfe2-7dfa-4ac0-92bf-c637a4545921",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Happiness",
            "subTarget": "Happiness",
            "style": "link"
          },
          {
            "id": "8b97dc75-0ecc-45e8-aa11-675cd1697888",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Feature Metrics",
            "subTarget": "Feature",
            "style": "link"
          },
          {
            "id": "3a770d7b-f7cc-4f67-8f88-595d7aef489b",
            "cellValue": "Tab",
            "linkTarget": "parameter",
            "linkLabel": "Development Requirements",
            "subTarget": "Technical",
            "style": "link"
          }
        ]
      },
      "name": "Tabs"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Overview",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 1,
            "content": {
              "json": "# HEART \n---\nA user engagement framework that enables holistic measurement of user experience by focusing on 5 dimensions captured through telemetry data.\n\nThe 5 dimensions of HEART enable measurement of **H**appiness, **E**ngagement, **A**doption, **R**etention & **T**ask Success.\n\nAdoption, Engagement, and Retention form a user activity funnel: a subset of users who **adopt** an experience progress become **retained** users. Completing **tasks successfully** drives users down this funnel.\n\nVisit the **Development Requirements** tab to learn more about telemetry implementation."
            },
            "customWidth": "100",
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "HEART Overview"
            },
            "name": "Overview"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "HEART Overview"
      },
      "name": "HEART Summary Title"
    },
    {
      "type": 1,
      "content": {
        "json": "## HEART Metrics: User Activity Funnel\r\n---\r\nThe below KPIs represent a subset of HEART Metrics. These visuals describe the user activity funnel: Adoption -> Engagement -> Retention.\r\n\r\n"
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "HEART Overview"
      },
      "name": "HEART Metrics Title"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Adoption Overview",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 1,
            "content": {
              "json": "## Adoption\r\n### Defining Adoption\r\nAny user who has loaded or visited the experience is considered an aware user (regardless of whether or not they have clicked or selected anything in the experience)."
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Adoption"
            },
            "name": "Adoption Text"
          },
          {
            "type": 1,
            "content": {
              "json": "| Metric                 | Definition                                                                          | Question Answered                                      |\r\n|------------------------|-------------------------------------------------------------------------------------|--------------------------------------------------------|\r\n| Aware Users            | Count of users who have loaded or visited the experience.                           | How many users are showing interest in the experience? |\r\n| Net New Aware Users    | Count of Aware Users who have visited the experience for the first time.            | How quickly is the experience gaining new users?       |\r\n| Cumulative Aware Users | Count of Aware Users who have visited the experience over the selected time period. | How has the interested user-base grown over time?      |"
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Adoption"
            },
            "name": "Adoption Metric Definitions"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Adoption"
      },
      "name": "Adoption Overview"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Engagement Overview",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 1,
            "content": {
              "json": "## Engagement\r\n### Why no \"Engagement Metric\"?\r\nIt is challenging to measure engagement generically because engagement is driven both by expected usage and actual usage. While an experience such as Microsoft Teams would have high daily usage as employees rely on Teams for daily communication, other experiences expect usage at a weekly or even monthly cadence (such as a rent payment portal). An accurate measurement of engagement should be based on an experience’s specific user-activity. For this reason, the HEART Framework measures engagement using the concept of Active Users (users who voluntarily interact with the experinces) and will be assessing engagement by breaking active usage down into 3 sub-dimensions: \r\n1. Activity Depth – how many features are users leveraging each time the user interacts with the experience?\r\n2. Activity Breadth – Over a given period, how many features of the experience is a user leveraging?\r\n3. Activity Frequency – How often does a user interact with the experience – daily, weekly, monthly?\r\n\r\n### Defining Active Users\t\r\nAny user who performs a user-initiated action like clicking a button, typing an input, etc. is counted as an Active User. While Aware Users includes all users who have loaded the experience, Active Users must have performed an intentional action. This workbook considers any telemetry event with an actionType as an \"intentional action\". **For this reason, Engagement metrics require the Click Analytics plugin implemented in telemetry**."
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Engagement"
            },
            "name": "Engagement Text"
          },
          {
            "type": 1,
            "content": {
              "json": "| Metric                        | Definition                                                         | Question Answered                                                                                         |\r\n|-------------------------------|--------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|\r\n| Active Users                  | Count of users who have performed a user-initiated action          | How many users are interacting with the experience?                                                       |\r\n| Overall Activity              | Proportion of Aware Users who are also Active Users                    | Are users progressing from interested to interacting with the experience?                                 |\r\n| Features Per Session          | Median number of features used per user per session                | Activity depth - how many features are users leveraging each time the user interacts with the experience? |\r\n| Median Features Used Per User | Median number of features used per user                            | Activity breadth - how many features of the experience is a user leveraging?                              |\r\n| Intensity (DAU / MAU)         | Proportion of Monthly Active Users who are also Daily Active Users | What percent of users in a given month interact with the experience on a daily basis?                            |\r\n| Intensity (DAU / WAU)         | Proportion of Weekly Active Users who are also Daily Active Users  | What percent of users in a given week interact with the experience on a daily basis?                             |"
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Engagement"
            },
            "name": "Engagement Metric Definitions"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Engagement"
      },
      "name": "Engagement Overview"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Retention Overview",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 1,
            "content": {
              "json": "## Retention\r\n### Defining Retention\r\nA retained user is an Active User who was active both this reporting period and the previous reporting period. As Active Users must have at least one telemetry event with an actionType, ** Retention metrics require the Click Analytics plugin implemented in telemetry**."
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Retention"
            },
            "name": "Retention Text"
          },
          {
            "type": 1,
            "content": {
              "json": "| Metric         | Definition                                                                          | Question Answered                                              |\r\n|----------------|-------------------------------------------------------------------------------------|----------------------------------------------------------------|\r\n| Retained Users | Count of Active Users who were also Active the previous period                      | How many users are staying engaged with the experience?        |\r\n| Retention      | Proportion of Active Users from the previous period who are also Active this period | What percent of users are staying engaged with the experience? |"
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Retention"
            },
            "name": "Retention Metric Definitions"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Retention"
      },
      "name": "Retention Overview"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Task Success Overview",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 1,
            "content": {
              "json": "## Task Success\r\n### Defining Task Success\r\nMany experiences include structures designed to funnel users through completing a task. Some examples include the following: \r\n* *adding items to a cart* -> *purchasing items from the cart*\r\n* *searching a keyword* -> *clicking on a result*\r\n* *inititating a new account* -> *completing account registration* \r\n\r\nTask Success tracks whether users can perform a task efficiently and effectively using the capabilities provided by the experience. \r\n\r\n### Measuring Task Success\r\nA successful task meets 3 requirements:\r\n1.\tExpected Task Flow – the intended task flow of the feature was completed (the task flow of the user aligned with the expected task flow)\r\n2.\tHigh Performance – the intended functionality of the feature was accomplished in a reasonable amount of time\r\n3.\tHigh Reliability – the intended functionality of the feature was accomplished without failure\r\n\r\nA task is considered unsuccessful if any of the above requirements is not met. **Task Success metrics require the Click Analytics plugin implemented in telemetry**.\r\n\r\n### Creating a task\r\nSet up a custom task using the below parameters.\r\n\r\n| Parameter         | Description                                                                                                                                                                                                                         |\r\n|-------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| First Step           | The feature that initiates the task. Using the cart/purchase example above, \"adding items to a cart\" would be the First Step.                                                                                                          |\r\n| Expected Task Duration | The time constraint to consider a completed task a success. Any tasks completed outside of this constraint is considered a failure. Not all tasks necessarily have a time constraint: for such tasks, select \"No Time Expectation\". |\r\n| Last Step        | The feature that completes the task. Using the cart/purchase example above, \"purchasing items from the cart\" would be the Last Step.                                                                                               |"
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Task Success"
            },
            "name": "Task Success Overview"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Task Success"
      },
      "name": "Task Success Overview"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "title": "Feature Metrics Overview",
        "expandable": true,
        "expanded": true,
        "items": [
          {
            "type": 1,
            "content": {
              "json": "## Feature Metrics\r\n\r\n### Why Feature Metrics?\r\nMany product owners are responsible for specific features within a product. Feature Metrics allow product owners to understand the impact of these features on the product on a more granular level than experience-level metrics. This increased granularity helps identify retention drivers and areas for improvement, streamlining product development.\r\n\r\n### Measuring Feature Metrics\r\nAs Active Users must have at least one telemetry event with an actionType, **Feature metrics require the Click Analytics plugin implemented in telemetry**.\r\n\r\n### Defining Feature Metrics\r\nThe HEART Framework considers a specific capability of an experience as a *feature*. This workbook identifies features with the *parentId* attribute within the Click Analytics plugin. Some examples of features include the following:\r\n* *a favorite button on a social media post*\r\n* *a search box within a website*\r\n* *a refresh button in a browser* \r\n\r\n\r\n| Metric                   | Definition                                                                                                            | Question Answered                                           |\r\n|--------------------------|-----------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\r\n| Net New Active Users (Feature)  | Count of users who have interacted with the feature for the first time                                                        | How quickly is the feature gaining new users?               |\r\n| Feature Active Users     | Count of users who have performed a user-initiated action on a specific feature                                       | How many users are actively using this feature?             |\r\n| Interactions             | Median number of user-initiated actions on a specific feature over a time period                                      | How deep is the engagement for this feature?                |\r\n| Retained Users (Feature) | Count of Active Users for this feature who were also Active for this feature the previous period                      | How many users are staying engaged with this feature?       |\r\n| Retention (Feature)      | Proportion of Active Users for this feature from the previous period who are also Active for this feature this period | What percent of users are staying engaged with the feature? |"
            },
            "conditionalVisibility": {
              "parameterName": "Tab",
              "comparison": "isEqualTo",
              "value": "Feature"
            },
            "name": "Feature Metrics Defintions"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Feature"
      },
      "name": "Feature Metrics Overview"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "bf03cbc5-2416-40f4-850b-db1b72104b7b",
            "cellValue": "Cadence",
            "linkTarget": "parameter",
            "linkLabel": "Monthly",
            "subTarget": "Monthly",
            "preText": "Cadence",
            "style": "link"
          },
          {
            "id": "d3bca4d1-5ac5-43b7-bcfa-d47c008c7009",
            "cellValue": "Cadence",
            "linkTarget": "parameter",
            "linkLabel": "Daily",
            "subTarget": "Daily",
            "style": "link"
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Tab",
          "comparison": "isNotEqualTo",
          "value": "HEART Overview"
        },
        {
          "parameterName": "Tab",
          "comparison": "isNotEqualTo",
          "value": "Task Success"
        },
        {
          "parameterName": "Tab",
          "comparison": "isNotEqualTo",
          "value": "Happiness"
        },
        {
          "parameterName": "Tab",
          "comparison": "isNotEqualTo",
          "value": "Technical"
        }
      ],
      "customWidth": "15",
      "name": "Cadence Tabs"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "### Adoption: Aware Users\r\nCount of unique users who have visited the experience."
            },
            "customWidth": "33",
            "name": "text - 8"
          },
          {
            "type": 1,
            "content": {
              "json": "### Engagement: Active Users\r\nCount of unique users who have voluntarily interacted with the experience."
            },
            "customWidth": "34",
            "name": "text - 8 - Copy"
          },
          {
            "type": 1,
            "content": {
              "json": "### Retention: Month-over-Month Retained Users\r\nCount of unique users who were active in both the current and previous time periods."
            },
            "customWidth": "33",
            "name": "Retention Title"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time:value}\") \n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| summarize [\"Aware Users\"]=dcountif(user_AuthenticatedId, isnotempty(user_AuthenticatedId)) by Month=format_datetime(timestamp, \"yyyy-MM\")\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  },
                  "min": 0
                }
              }
            },
            "customWidth": "33",
            "showPin": false,
            "name": "Aware Users",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "customEvents\n| where timestamp >= todatetime(\"{Time:value}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| summarize [\"Active Users\"]=dcountif(user_AuthenticatedId,isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)) by Month=format_datetime(timestamp, \"yyyy-MM\")\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  },
                  "min": 0
                }
              }
            },
            "customWidth": "34",
            "showPin": false,
            "name": "Active Users",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\n| where timestamp >= todatetime(\"{Time:value}\")\n;\nlet data = customEvents\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet ActiveUsersLastMonth = data\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\n| summarize by Month = endofmonth(datetime_add(\"month\", 1, timestamp)), ActiveUser = user_AuthenticatedId\n;\nlet Retained = data\n| summarize by Month = endofmonth(timestamp), ActiveUser = user_AuthenticatedId\n| join kind = inner (ActiveUsersLastMonth) on Month, ActiveUser\n| summarize RetainedUsers=dcount(ActiveUser) by Month=format_datetime(Month, \"yyyy-MM\")\n;\ndatedata\n| summarize by Month = format_datetime(timestamp, \"yyyy-MM\")\n| join kind=leftouter (Retained) on Month\n| project Month, [\"Retained Users\"]=coalesce(RetainedUsers, 0)\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  },
                  "min": 0
                }
              }
            },
            "customWidth": "33",
            "showPin": false,
            "name": "Retained Users",
            "styleSettings": {
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "HEART Overview"
      },
      "name": "HEART Overview"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| summarize [\"Aware Users\"]=dcountif(user_AuthenticatedId, isnotempty(user_AuthenticatedId)) by Month=format_datetime(timestamp, \"yyyy-MM\") // count only authenticated users\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Aware Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Aware Users",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n| extend Month=format_datetime(timestamp, \"yyyy-MM\")\n;\nlet userdata = data\n| where isnotempty(user_AuthenticatedId)\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet userFirstAware = userdata\n| summarize FirstAware=format_datetime(min(timestamp), \"yyyy-MM\") by user_AuthenticatedId\n| summarize NewUsers = dcount(user_AuthenticatedId) by FirstAware // first date each user visited the experience\n;\ndata\n| summarize by Month\n| join kind=leftouter (userFirstAware) on $left.Month==$right.FirstAware\n| summarize by [\"Net New Aware Users\"] = coalesce(NewUsers, 0), Month\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Net New Aware Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "Net New Aware Users"
                ],
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Net New Aware",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n| extend Month=format_datetime(timestamp, \"yyyy-MM\")\n;\nlet userdata = data\n| where isnotempty(user_AuthenticatedId)\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet userFirstAware = userdata\n| summarize FirstAware=format_datetime(min(timestamp), \"yyyy-MM\") by user_AuthenticatedId\n| summarize NewUsers = dcount(user_AuthenticatedId) by FirstAware // first date each user visited the experience\n;\nlet userAware = userdata\n| summarize AwareUsers =  dcount(user_AuthenticatedId) by Month\n;\ndata\n| summarize by Month\n| join kind=leftouter (userFirstAware) on $left.Month==$right.FirstAware\n| join kind=leftouter (userAware) on Month\n| summarize by [\"Net New Aware Users %\"] = coalesce(NewUsers * 1.0 / AwareUsers, 0.0), Month\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Net New Aware Users %",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "Net New Aware Users %"
                ],
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true,
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Net New Aware Pct",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet userFirstAware = data\r\n| where isnotempty(user_AuthenticatedId)\r\n| summarize Month=format_datetime(min(timestamp), \"yyyy-MM\") by user_AuthenticatedId, Row=1 // first date each user visited the experience\r\n;\r\ndata\r\n| summarize by Month=format_datetime(timestamp, \"yyyy-MM\")\r\n| join kind=leftouter (userFirstAware) on Month\r\n| order by Month asc\r\n| extend RowNum=row_cumsum(Row) // sum rows to count users, 1 row for each user\r\n| summarize [\"Cumulative Aware Users\"]=coalesce(max(RowNum), 0) by Month",
              "size": 1,
              "aggregation": 5,
              "title": "Cumulative Aware Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "sortBy": [],
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true
              }
            },
            "customWidth": "50",
            "name": "Cumulative Aware Users",
            "styleSettings": {
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Tab",
          "comparison": "isEqualTo",
          "value": "Adoption"
        },
        {
          "parameterName": "Cadence",
          "comparison": "isEqualTo",
          "value": "Monthly"
        }
      ],
      "name": "Adoption Monthly"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| summarize [\"Aware Users\"]=dcountif(user_AuthenticatedId, isnotempty(user_AuthenticatedId)) by Day=startofday(timestamp) // count only authenticated users\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Aware Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Aware Users Daily",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet userFirstAware = data\n| summarize FirstAware=startofday(min(timestamp)) by user_AuthenticatedId // first date each user visited the experience\n;\ndata\n| summarize by Day=startofday(timestamp) \n| join kind=leftouter (userFirstAware) on $left.Day==$right.FirstAware\n| summarize [\"Net New Aware Users\"]=coalesce(dcountif(user_AuthenticatedId, isnotempty(user_AuthenticatedId)), 0) by Day\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Net New Aware Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Net New Aware Daily",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| extend Day=startofday(timestamp)\n;\nlet userFirstAware = data\n| summarize FirstAware=startofday(min(timestamp)) by user_AuthenticatedId\n| summarize NewUsers=dcountif(user_AuthenticatedId, isnotempty(user_AuthenticatedId)) by FirstAware // first date each user visited the experience\n;\nlet awareUsers = data\n| summarize AwareUsers=dcountif(user_AuthenticatedId, isnotempty(user_AuthenticatedId)) by Day\n;\ndata\n| summarize by Day\n| join kind=leftouter (userFirstAware) on $left.Day==$right.FirstAware\n| join kind=leftouter (awareUsers) on Day\n| summarize by [\"Net New Aware User %\"]=coalesce(NewUsers * 1.0 / AwareUsers, 0.0), Day\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Net New Aware Users %",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true,
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Net New Aware Daily Pct",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet userFirstAware = data\r\n| where isnotempty(user_AuthenticatedId)\r\n| summarize Day=startofday(min(timestamp)) by user_AuthenticatedId, Row=1  // first date each user visited the experience\r\n;\r\ndata\r\n| summarize by Day=startofday(timestamp)\r\n| join kind=leftouter (userFirstAware) on Day\r\n| order by Day asc\r\n| extend RowNum=row_cumsum(Row) // sum rows to count users, 1 row per user\r\n| summarize [\"Cumulative Aware Users\"]=coalesce(max(RowNum), 0) by Day",
              "size": 1,
              "aggregation": 5,
              "title": "Cumulative Aware Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "sortBy": [],
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true
              }
            },
            "customWidth": "50",
            "name": "Cumulative Aware Users",
            "styleSettings": {
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Tab",
          "comparison": "isEqualTo",
          "value": "Adoption"
        },
        {
          "parameterName": "Cadence",
          "comparison": "isEqualTo",
          "value": "Daily"
        }
      ],
      "name": "Adoption - Daily"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| summarize [\"Active Users\"]=dcountif(user_AuthenticatedId,isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)) by Month=format_datetime(timestamp, \"yyyy-MM\") // count only authenticated users with at least one keyboard or mouse click\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Active Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "33",
            "showPin": false,
            "name": "Active Users",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| extend Month=format_datetime(timestamp, \"yyyy-MM\")\n;\nlet Activity = data\n| where isnotempty(user_AuthenticatedId) // filter to only authenticated users\n| summarize OverallActivity=dcountif(user_AuthenticatedId,isnotnull(customDimensions.actionType)) * 1.0 / dcount(user_AuthenticatedId) by Month // proportion of all authenticated users with at least 1 keyboard or mouse click\n;\ndata\n| summarize by Month\n| join kind=leftouter (Activity) on Month\n| project Month, [\"Overall Activity\"] = coalesce(OverallActivity, 0.0)\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Overall Activity",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true,
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "34",
            "showPin": false,
            "name": "Overall Activity",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| extend Month = format_datetime(timestamp, \"yyyy-MM\")\r\n;\r\nlet MonthlyFeatureSession = data\r\n| where isnotnull(customDimensions.parentId) and isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\r\n| summarize MonthlyFeatureCount=dcount(tostring(customDimensions.parentId)) by Month, user_AuthenticatedId, session_Id\r\n| summarize MonthlyMedianFeaturesSession = percentile(MonthlyFeatureCount, 50) by Month\r\n;\r\ndata\r\n| summarize by Month\r\n| join kind=leftouter (MonthlyFeatureSession) on Month\r\n| project Month, [\"Features per Session\"]=coalesce(MonthlyMedianFeaturesSession, 0)\r\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Activity Depth: Median Features per Session",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "yAxis": [
                  "Features per Session"
                ],
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true
              }
            },
            "customWidth": "33",
            "name": "Median Features per Session",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| extend Month = startofmonth(timestamp), Day = startofday(timestamp)\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\r\n;\r\nlet dailyFeature = data\r\n| summarize DailyFeatures = dcount(tostring(customDimensions.parentId)) by Month, Day, user_AuthenticatedId\r\n| summarize DailyMedian = percentile(DailyFeatures, 50) by Month\r\n;\r\nlet monthlyFeature = data\r\n| summarize MonthlyFeatures = dcount(tostring(customDimensions.parentId)) by Month, user_AuthenticatedId\r\n| summarize MonthlyMedian = percentile(MonthlyFeatures, 50) by Month\r\n;\r\nmonthlyFeature\r\n| join dailyFeature on Month\r\n| project Month=format_datetime(Month, \"yyyy-MM\"), [\"Daily Feature Usage\"]=DailyMedian, [\"Monthly Feature Usage\"]=MonthlyMedian\r\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Activity Breadth: Median Features Used Per User",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "xAxis": "Month",
                "yAxis": [
                  "Daily Feature Usage",
                  "Monthly Feature Usage"
                ],
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  },
                  "min": 0
                }
              }
            },
            "customWidth": "33",
            "name": "Median Features Used",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n| extend Month = format_datetime(timestamp, \"yyyy-MM\"), Day = startofday(timestamp)\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet dau = data\r\n| summarize DailyActiveUsers = dcount(user_AuthenticatedId) by Month, Day // count active users by day\r\n;\r\nlet mau = data\r\n| summarize MonthlyActiveUsers = dcount(user_AuthenticatedId) by Month // count active users by month\r\n;\r\ndatedata\r\n| summarize by Month\r\n| join kind=leftouter (dau) on Month\r\n| join kind=leftouter (mau) on Month\r\n| summarize Intensity = percentile(DailyActiveUsers, 50) * 1.0 / min(MonthlyActiveUsers) by Month // divide median daily active users by monthly active users to get proportion of users visiting the experience on a daily basis\r\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Activity Frequency: Intensity (DAU / MAU)",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "tileSettings": {
                "showBorder": false,
                "titleContent": {
                  "columnMatch": "month",
                  "formatter": 1
                },
                "leftContent": {
                  "columnMatch": "Intensity",
                  "formatter": 12,
                  "formatOptions": {
                    "palette": "auto"
                  },
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              },
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "33",
            "name": "Intensity (DAU / MAU)",
            "styleSettings": {
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Tab",
          "comparison": "isEqualTo",
          "value": "Engagement"
        },
        {
          "parameterName": "Cadence",
          "comparison": "isEqualTo",
          "value": "Monthly"
        }
      ],
      "name": "Engagement"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| summarize [\"Active Users\"]=dcountif(user_AuthenticatedId,isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)) by Day=startofday(timestamp) // count only authenticated users with at least one keyboard or mouse click\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Active Users",
              "noDataMessage": "The query returned no results. Ensure the Click Analytics plugin is implemented in the telemetry.",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "33",
            "showPin": false,
            "name": "Active Users Daily",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = union pageViews, customEvents\n| where timestamp >= todatetime(\"{Time}\")\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n| extend Day=startofday(timestamp)\n;\nlet Activity = data\n| where isnotempty(user_AuthenticatedId) // filter to only authenticated users\n| summarize OverallActivity=dcountif(user_AuthenticatedId,isnotnull(customDimensions.actionType)) * 1.0 / dcount(user_AuthenticatedId) by Day // proportion of all authenticated users with at least 1 keyboard or mouse click\n;\ndata\n| summarize by Day\n| join kind=leftouter (Activity) on Day\n| project Day, [\"Overall Activity\"] = coalesce(OverallActivity, 0.0)\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Overall Activity",
              "noDataMessage": "The query returned no results. Ensure the Click Analytics plugin is implemented in the telemetry.",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true,
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "34",
            "showPin": false,
            "name": "Overall Activity Daily",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| extend Day=startofday(timestamp)\r\n;\r\nlet DailyFeatureSession = data\r\n| where isnotnull(customDimensions.parentId) and isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\r\n| summarize DailyFeatureCount=dcount(tostring(customDimensions.parentId)) by Day, user_AuthenticatedId, session_Id\r\n| summarize DailyMedianFeaturesSession = percentile(DailyFeatureCount, 50) by Day\r\n;\r\ndata\r\n| summarize by Day\r\n| join kind=leftouter (DailyFeatureSession) on Day\r\n| project Day, [\"Features per Session\"]=coalesce(DailyMedianFeaturesSession, 0)\r\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Median Features per Session",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "xAxis": "Day",
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "min": 0
                }
              }
            },
            "customWidth": "33",
            "name": "Features per Session Daily",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| extend Day = startofday(timestamp), Week = startofweek(timestamp)\r\n;\r\nlet dailyFeature = data\r\n| summarize DailyFeatures = dcount(tostring(customDimensions.parentId)) by Day, user_AuthenticatedId\r\n| summarize DailyMedian = percentile(DailyFeatures, 50) by Day\r\n;\r\nlet weeklyFeature = data\r\n| summarize WeeklyFeatures = dcount(tostring(customDimensions.parentId)) by Week, user_AuthenticatedId\r\n| summarize WeeklyMedian = percentile(WeeklyFeatures, 50) by Week\r\n;\r\ndatedata\r\n| summarize by Day=startofday(timestamp)\r\n| join kind=leftouter dailyFeature on Day\r\n| join kind=leftouter weeklyFeature on $left.Day == $right.Week\r\n| project Day, [\"Daily Feature Usage\"]=coalesce(DailyMedian, 0), [\"Weekly Feature Usage\"]=WeeklyMedian\r\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Median Features Used Per User",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "xAxis": "Day",
                "yAxis": [
                  "Daily Feature Usage",
                  "Weekly Feature Usage"
                ],
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true
              }
            },
            "customWidth": "33",
            "name": "Median Features Used Per User Daily",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n| extend Week = startofweek(timestamp), Day = startofday(timestamp)\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet dau = data\r\n| summarize DailyActiveUsers = dcount(user_AuthenticatedId) by Week, Day\r\n;\r\nlet wau = data\r\n| summarize WeeklyActiveUsers = dcount(user_AuthenticatedId) by Week\r\n;\r\ndatedata\r\n| join kind=leftouter (dau) on Day\r\n| join kind=leftouter (wau) on Week\r\n| summarize Intensity = percentile(DailyActiveUsers, 50) * 1.0 / min(WeeklyActiveUsers) by Week\r\n| order by Week asc",
              "size": 1,
              "aggregation": 5,
              "title": "Intensity (DAU / WAU)",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "tileSettings": {
                "showBorder": false,
                "titleContent": {
                  "columnMatch": "month",
                  "formatter": 1
                },
                "leftContent": {
                  "columnMatch": "Intensity",
                  "formatter": 12,
                  "formatOptions": {
                    "palette": "auto"
                  },
                  "numberFormat": {
                    "unit": 17,
                    "options": {
                      "maximumSignificantDigits": 3,
                      "maximumFractionDigits": 2
                    }
                  }
                }
              },
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "34",
            "name": "Intensity (DAU / WAU)",
            "styleSettings": {
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Cadence",
          "comparison": "isEqualTo",
          "value": "Daily"
        },
        {
          "parameterName": "Tab",
          "comparison": "isEqualTo",
          "value": "Engagement"
        }
      ],
      "name": "Engagement - Daily"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\n| where timestamp >= todatetime(\"{Time}\")\n;\nlet data = datedata\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) // filter to active authenticated users only\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet ActiveUsersLastMonth = data\n| summarize by Month = endofmonth(datetime_add(\"month\", 1, timestamp)), ActiveUser = user_AuthenticatedId // add 1 month to join on next month active users to count retained\n;\nlet Retained = data\n| summarize by Month = endofmonth(timestamp), ActiveUser = user_AuthenticatedId\n| join kind = inner (ActiveUsersLastMonth) on Month, ActiveUser  // users visited experiences in back-to-back months\n| summarize RetainedUsers=dcount(ActiveUser) by Month=format_datetime(Month, \"yyyy-MM\")\n;\ndatedata\n| summarize by Month = format_datetime(timestamp, \"yyyy-MM\")\n| join kind=leftouter (Retained) on Month\n| project Month, [\"Retained Users\"]=coalesce(RetainedUsers, 0)\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Month-over-Month Retained Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Retained Users",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\n| where timestamp >= todatetime(\"{Time}\")\n;\nlet data = datedata\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet ActiveUsersLastMonth = data\n| summarize by Month = endofmonth(datetime_add(\"month\", 1, timestamp)), ActiveUser = user_AuthenticatedId\n;\nlet Retained = data\n| summarize by Month = endofmonth(timestamp), ActiveUser = user_AuthenticatedId\n| join kind = inner (ActiveUsersLastMonth) on Month, ActiveUser\n| summarize RetainedUsers=dcount(ActiveUser) by Month=format_datetime(Month, \"yyyy-MM\")\n;\ndatedata\n| summarize by Month = format_datetime(timestamp, \"yyyy-MM\")\n| join kind=leftouter (Retained) on Month\n| join kind=leftouter (ActiveUsersLastMonth | summarize ActiveUsers=dcount(ActiveUser) by Month=format_datetime(Month, \"yyyy-MM\")) on Month  // count all active users from previous month\n| extend Retention = RetainedUsers * 1.0 / ActiveUsers // proportion of active users who returned the following month\n| project Month, Retention=coalesce(case(isnan(Retention), 0.0, Retention), 0.0)\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Month-over-Month Retention",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "gridSettings": {
                "sortBy": [
                  {
                    "itemKey": "Month",
                    "sortOrder": 2
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "Month",
                  "sortOrder": 2
                }
              ],
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true,
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Retention",
            "styleSettings": {
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Tab",
          "comparison": "isEqualTo",
          "value": "Retention"
        },
        {
          "parameterName": "Cadence",
          "comparison": "isEqualTo",
          "value": "Monthly"
        }
      ],
      "name": "Retention"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\n| where timestamp >= todatetime(\"{Time}\")\n;\nlet data = datedata\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet ActiveUsersLastDay = data\n| summarize by Day = startofday(datetime_add(\"day\", 1, timestamp)), ActiveUser = user_AuthenticatedId\n;\nlet Retained = data\n| summarize by Day = startofday(timestamp), ActiveUser = user_AuthenticatedId\n| join kind = inner (ActiveUsersLastDay) on Day, ActiveUser\n| summarize RetainedUsers=dcount(ActiveUser) by Day\n;\ndatedata\n| summarize by Day = startofday(timestamp)\n| join kind=leftouter (Retained) on Day\n| project Day, [\"Retained Users\"]=coalesce(RetainedUsers, 0)\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Day-over-Day Retained Users",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "decimal",
                      "useGrouping": true
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Retained Users",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let datedata = customEvents\n| where timestamp >= todatetime(\"{Time}\")\n;\nlet data = datedata\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\n;\nlet ActiveUsersLastDay = data\n| summarize by Day = startofday(datetime_add(\"day\", 1, timestamp)), ActiveUser = user_AuthenticatedId\n;\nlet Retained = data\n| summarize by Day = startofday(timestamp), ActiveUser = user_AuthenticatedId\n| join kind = inner (ActiveUsersLastDay) on Day, ActiveUser\n| summarize RetainedUsers=dcount(ActiveUser) by Day\n;\ndatedata\n| summarize by Day=startofday(timestamp)\n| join kind=leftouter (Retained) on Day\n| join kind=leftouter (ActiveUsersLastDay | summarize ActiveUsers=dcount(ActiveUser) by Day) on Day\n| extend Retention = RetainedUsers * 1.0 / ActiveUsers\n| project Day, Retention=coalesce(case(isnan(Retention), 0.0, Retention), 0.0)\n| order by Day asc",
              "size": 1,
              "aggregation": 5,
              "title": "Day-over-Day Retention",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "gridSettings": {
                "sortBy": [
                  {
                    "itemKey": "Month",
                    "sortOrder": 2
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "Month",
                  "sortOrder": 2
                }
              ],
              "chartSettings": {
                "group": null,
                "createOtherGroup": 0,
                "showDataPoints": true,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true,
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "customWidth": "50",
            "showPin": false,
            "name": "Retention",
            "styleSettings": {
              "showBorder": true
            }
          }
        ]
      },
      "conditionalVisibilities": [
        {
          "parameterName": "Tab",
          "comparison": "isEqualTo",
          "value": "Retention"
        },
        {
          "parameterName": "Cadence",
          "comparison": "isEqualTo",
          "value": "Daily"
        }
      ],
      "name": "Retention Daily"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "0926fed8-73b7-445a-9b95-0162a261b7ea",
                  "version": "KqlParameterItem/1.0",
                  "name": "TopStep",
                  "type": 2,
                  "description": "Select the activities that form the top of your funnel.",
                  "isRequired": true,
                  "query": "union customEvents\r\n| where timestamp > ago(90d)\r\n| summarize by Feature=tostring(customDimensions.parentId)\r\n| where isnotempty(Feature)\r\n| order by Feature asc\r\n| project Id=Feature, Title=Feature, Selected=false",
                  "value": "App Name Search",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components",
                  "label": "First Step"
                },
                {
                  "id": "8011e573-a9c3-420d-93c6-aff9f652234d",
                  "version": "KqlParameterItem/1.0",
                  "name": "ExpDuration",
                  "label": "Expected Task Duration",
                  "type": 2,
                  "description": "Select the expected time frame in which this funnel is expected to be completed.",
                  "isRequired": true,
                  "query": "datatable(text:string, value:timespan)[\r\n\"No Time Expectation\", time(0.00:00:00.0),\r\n\"1 second\", time(0.00:00:01.0),\r\n\"2 seconds\", time(0.00:00:02.0),\r\n\"5 seconds\", time(0.00:00:05.0),\r\n\"30 seconds\", time(0.00:00:30.0),\r\n\"60 seconds\", time(0.00:01:00.0),\r\n\"90 seconds\", time(0.00:01:30.0),\r\n\"2 minutes\", time(0.00:02:00.0),\r\n\"1 hour\", time(0.01:00:00.0),\r\n\"1 day\", time(1.00:00:00.0),\r\n]\r\n| order by value asc\r\n| project value, text",
                  "value": "00:00:00",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "defaultValue": "value::1",
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                }
              ],
              "style": "pills",
              "queryType": 0,
              "resourceType": "microsoft.insights/components"
            },
            "name": "FunnelTop"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "86e6de6d-8983-4327-bf84-fdc6dd7a23c7",
                  "version": "KqlParameterItem/1.0",
                  "name": "BottomStep",
                  "type": 2,
                  "description": "Select the activities that form the bottom of your funnel.",
                  "isRequired": true,
                  "query": "union customEvents\r\n| where timestamp > ago(90d)\r\n| summarize by Feature=tostring(customDimensions.parentId)\r\n| where isnotempty(Feature)\r\n| order by Feature asc\r\n| project Id=Feature, Title=Feature, Selected=false",
                  "value": "Registration Save",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components",
                  "label": "Last Step"
                }
              ],
              "style": "pills",
              "queryType": 0,
              "resourceType": "microsoft.insights/components"
            },
            "name": "FunnelBottom"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| where isnotempty(user_AuthenticatedId);\r\nlet topUsers = data\r\n| where customDimensions.parentId == \"{TopStep}\"\r\n| summarize by Step1Timestamp=timestamp, session_Id, user_AuthenticatedId;\r\nlet bottomUsers = data\r\n| where customDimensions.parentId == \"{BottomStep}\"\r\n| summarize by Step2Timestamp=timestamp, session_Id, user_AuthenticatedId;\r\nlet funnel = topUsers\r\n| join kind=inner (bottomUsers) on session_Id\r\n| where Step2Timestamp >= Step1Timestamp\r\n| summarize Step1Timestamp=max(Step1Timestamp) by Step2Timestamp, session_Id, user_AuthenticatedId;\r\nlet funnelTop = topUsers\r\n| summarize TopCount=count() by Month=format_datetime(Step1Timestamp, \"yyyy-MM\");\r\nlet funnelBottom = funnel\r\n| extend Duration = Step2Timestamp - Step1Timestamp\r\n| extend NoTime = time({ExpDuration}) == 0\r\n| extend Flag = case(NoTime or Duration <= time({ExpDuration}), true, false)\r\n| summarize BottomCount=countif(Flag) by Month=format_datetime(Step1Timestamp, \"yyyy-MM\");\r\ndata\r\n| summarize by Month=format_datetime(timestamp, \"yyyy-MM\")\r\n| join kind=leftouter (funnelTop) on Month\r\n| join kind=leftouter (funnelBottom) on Month\r\n| project Month, [\"Task Completion Rate\"]=coalesce(BottomCount * 1.0 / TopCount, 0.0)\r\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Task Completion",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "xAxis": "Month",
                "yAxis": [
                  "Task Completion Rate"
                ],
                "group": null,
                "createOtherGroup": 0,
                "ySettings": {
                  "numberFormatSettings": {
                    "unit": 0,
                    "options": {
                      "style": "percent",
                      "useGrouping": true,
                      "minimumSignificantDigits": 3,
                      "maximumSignificantDigits": 3
                    }
                  }
                }
              }
            },
            "name": "Task Completion"
          },
          {
            "type": 1,
            "content": {
              "json": "### Duration\r\nAnalyze the Duration between the selected First Step and Last Below. Adjust the Percentile parameters to change the percentiles shown in the visual. This visual helps understand the time distribution against a specified task. As an example, a percentile of 75 means that 75% of tasks are completed within this time range (and therefore 25% of tasks are *not* completed within this time range)."
            },
            "name": "Duration Overview"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "6df5688d-ec30-4831-a7a6-6dc35fff05a3",
                  "version": "KqlParameterItem/1.0",
                  "name": "DurationUnits",
                  "label": "Duration Units",
                  "type": 2,
                  "description": "Select the units for which Duration will be displayed.",
                  "isRequired": true,
                  "query": "let Table=datatable(value:timespan, text:string)[\r\n1s, 'Seconds',\r\n1m, 'Minutes',\r\n1h, 'Hours',\r\n1d, 'Days',\r\n];\r\nTable\r\n| project value, text",
                  "value": "00:00:01",
                  "typeSettings": {
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                },
                {
                  "id": "b81fcce1-8eab-4d6b-afec-98d417cf6f83",
                  "version": "KqlParameterItem/1.0",
                  "name": "Duration1",
                  "label": "Duration Percentile 1",
                  "type": 1,
                  "description": "Select the first percentile to be shown in the Duration visual.",
                  "isRequired": true,
                  "query": "datatable(perc: int)[\r\n25,\r\n]",
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                },
                {
                  "id": "270ce462-f916-4f80-8fc6-f8c4aaaf9242",
                  "version": "KqlParameterItem/1.0",
                  "name": "Duration2",
                  "label": "Duration Percentile 2",
                  "type": 1,
                  "description": "Select the second percentile to be shown in the Duration visual.",
                  "isRequired": true,
                  "query": "datatable(perc: int)[\r\n50,\r\n]",
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                },
                {
                  "id": "94d743c9-056f-4401-a1c2-8c62c9113b80",
                  "version": "KqlParameterItem/1.0",
                  "name": "Duration3",
                  "label": "Duration Percentile 3",
                  "type": 1,
                  "description": "Select the third percentile to be shown in the Duration visual.",
                  "isRequired": true,
                  "query": "datatable(perc: int)[\r\n75,\r\n]",
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                }
              ],
              "style": "pills",
              "queryType": 0,
              "resourceType": "microsoft.insights/components"
            },
            "name": "Duration Parameters"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "let data = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| where isnotempty(user_AuthenticatedId);\r\nlet topUsers = data\r\n| where customDimensions.parentId == \"{TopStep}\"\r\n| summarize by Step1Timestamp=timestamp, session_Id, user_AuthenticatedId;\r\nlet bottomUsers = data\r\n| where customDimensions.parentId == \"{BottomStep}\"\r\n| summarize by Step2Timestamp=timestamp, session_Id, user_AuthenticatedId;\r\nlet funnel = topUsers\r\n| join kind=inner (bottomUsers) on session_Id\r\n| where Step2Timestamp >= Step1Timestamp\r\n| summarize Step1Timestamp=max(Step1Timestamp) by Step2Timestamp, session_Id, user_AuthenticatedId;\r\nlet funnelTop = topUsers\r\n| summarize TopCount=count() by Month=format_datetime(Step1Timestamp, \"yyyy-MM\");\r\nlet funnelDuration = funnel\r\n| extend Month=format_datetime(Step1Timestamp, \"yyyy-MM\"), Duration=(Step2Timestamp-Step1Timestamp)/time({DurationUnits})\r\n| summarize Duration1 = percentile(Duration, {Duration1}), Duration2 = percentile(Duration, {Duration2}), Duration3 = percentile(Duration, {Duration3}) by Month;\r\nlet funnelBottom = funnel\r\n| summarize BottomCount=count() by Month=format_datetime(Step1Timestamp, \"yyyy-MM\");\r\ndata\r\n| summarize by Month=format_datetime(timestamp, \"yyyy-MM\")\r\n| join kind=leftouter (funnelDuration) on Month\r\n| project Month, [\"Duration 1\"] = Duration1, [\"Duration 2\"] = Duration2, [\"Duration 3\"] = Duration3\r\n| order by Month asc",
              "size": 1,
              "aggregation": 5,
              "title": "Duration",
              "queryType": 0,
              "resourceType": "microsoft.insights/components",
              "visualization": "linechart",
              "chartSettings": {
                "xAxis": "Month",
                "yAxis": [
                  "Duration 1",
                  "Duration 2",
                  "Duration 3"
                ],
                "group": null,
                "createOtherGroup": 0
              }
            },
            "name": "Duration"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Task Success"
      },
      "name": "Task Success - Copy"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "## Happiness\r\n### Defining Happiness\t\r\nHappiness is a user-reported dimension that measures how users feel about the experience offered to them. \r\n\r\n### Measuring Happiness\r\nA common approach to measure this dimension is to ask users a Net Promoter Score (NPS) question such as “Would you recommend this experience to a co-worker?”. Users' responses on a 3 or a 5-point scale (e.g., no, maybe and yes) are aggregated to create an experience-level score ranging from 1-5 (with 5 being the highest). As user-initiated feedback tends to be negatively biased, HEART tracks Happiness from surveys displayed to users at pre-defined intervals.\r\n\r\n### User Sentiment Data\r\nRefer to the [Azure Monitor documentation regarding custom sources](https://docs.microsoft.com/en-us/azure/azure-monitor/agents/data-sources#custom-sources) to upload user sentiment data to calculate Happiness metrics. Common Happiness metrics include \"Average Star Rating\", \"Net Promoter Score\", etc."
            },
            "name": "text - 5"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Happiness"
      },
      "name": "Happiness"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "---"
            },
            "name": "Feature Top Line Separator"
          },
          {
            "type": 9,
            "content": {
              "version": "KqlParameterItem/1.0",
              "parameters": [
                {
                  "id": "445ab212-5be3-4534-9bb1-a2152c602b64",
                  "version": "KqlParameterItem/1.0",
                  "name": "Feature",
                  "type": 2,
                  "isRequired": true,
                  "multiSelect": true,
                  "quote": "'",
                  "delimiter": ",",
                  "query": "customEvents\r\n| extend Feature = tostring(customDimensions.parentId)\r\n| where isnotempty(Feature)\r\n| distinct Feature",
                  "value": [
                    "App Name Search"
                  ],
                  "typeSettings": {
                    "limitSelectTo": 5,
                    "additionalResourceOptions": [],
                    "showDefault": false
                  },
                  "defaultValue": "value::1",
                  "queryType": 0,
                  "resourceType": "microsoft.insights/components"
                }
              ],
              "style": "pills",
              "queryType": 0,
              "resourceType": "microsoft.insights/components"
            },
            "name": "Feature Parameter"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n| extend Month = format_datetime(timestamp, \"yyyy-MM\"), Day = startofday(timestamp)\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet FeatureDAU = data\r\n| summarize DailyActiveUsers = dcount(user_AuthenticatedId) by Month, Day\r\n| summarize DAU = percentile(DailyActiveUsers, 50) by Month\r\n;\r\nlet FeatureMAU = data\r\n| summarize MAU=dcount(user_AuthenticatedId) by Month\r\n;\r\ndatedata\r\n| summarize by Month\r\n| join kind=leftouter (FeatureDAU) on Month\r\n| join kind=leftouter (FeatureMAU) on Month\r\n| project Month, MAU=coalesce(MAU, 0), DAU=coalesce(DAU, 0)\r\n| order by Month asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Active Users (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Month",
                      "yAxis": [
                        "MAU",
                        "DAU"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true
                    }
                  },
                  "customWidth": "33",
                  "name": "Active Users (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n;\r\nlet userFirstAware = datedata\r\n| where isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| summarize FirstActive=format_datetime(min(timestamp), \"yyyy-MM\") by user_AuthenticatedId\r\n;\r\ndatedata\r\n| summarize by Month=format_datetime(timestamp, \"yyyy-MM\")\r\n| join kind=leftouter (userFirstAware) on $left.Month==$right.FirstActive\r\n| summarize [\"Net New Active Users\"]=coalesce(dcount(user_AuthenticatedId), 0) by Month\r\n| order by Month asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Net New Active Users (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Month",
                      "yAxis": [
                        "Net New Active Users"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true
                    }
                  },
                  "customWidth": "34",
                  "name": "Net New Users (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n| extend Month=format_datetime(timestamp, \"yyyy-MM\"), Day=startofday(timestamp)\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet DailyFeatureInteractions = data\r\n| summarize DailyInteractions=count() by Month, Day, user_AuthenticatedId\r\n| summarize DailyMedianInteractions = percentile(DailyInteractions, 50) by Month\r\n;\r\nlet MonthlyFeatureInteractions = data\r\n| summarize MonthlyInteractions=count() by Month, user_AuthenticatedId\r\n| summarize MonthlyMedianInteractions = percentile(MonthlyInteractions, 50) by Month\r\n;\r\ndatedata\r\n| summarize by Month\r\n| join kind=leftouter (DailyFeatureInteractions) on Month\r\n| join kind=leftouter (MonthlyFeatureInteractions) on Month\r\n| project Month, [\"Daily Interactions\"]=coalesce(DailyMedianInteractions, 0), [\"Monthly Interactions\"]=coalesce(MonthlyMedianInteractions, 0)\r\n| order by Month asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Median Interactions",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Month",
                      "yAxis": [
                        "Daily Interactions",
                        "Monthly Interactions"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true
                    }
                  },
                  "customWidth": "33",
                  "name": "Median Interactions",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet ActiveUsersLastMonth = data\r\n| summarize by Month = endofmonth(datetime_add(\"month\", 1, timestamp)), ActiveUser = user_AuthenticatedId\r\n;\r\nlet Retained = data\r\n| summarize by Month = endofmonth(timestamp), ActiveUser = user_AuthenticatedId\r\n| join kind = inner (ActiveUsersLastMonth) on Month, ActiveUser\r\n| summarize RetainedUsers=dcount(ActiveUser) by Month=format_datetime(Month, \"yyyy-MM\")\r\n;\r\ndatedata\r\n| summarize by Month = format_datetime(timestamp, \"yyyy-MM\")\r\n| join kind=leftouter (Retained) on Month\r\n| project Month, [\"Retained Users\"]=coalesce(RetainedUsers, 0)\r\n| order by Month asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Retained Users (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Month",
                      "yAxis": [
                        "Retained Users"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true,
                      "xSettings": {
                        "numberFormatSettings": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": true
                          }
                        }
                      }
                    }
                  },
                  "customWidth": "33",
                  "name": "Retained Users (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet ActiveUsersLastMonth = data\r\n| summarize by Month = endofmonth(datetime_add(\"month\", 1, timestamp)), ActiveUser = user_AuthenticatedId\r\n;\r\nlet Retained = data\r\n| summarize by Month = endofmonth(timestamp), ActiveUser = user_AuthenticatedId\r\n| join kind = inner (ActiveUsersLastMonth) on Month, ActiveUser\r\n| summarize RetainedUsers=dcount(ActiveUser) by Month=format_datetime(Month, \"yyyy-MM\")\r\n;\r\ndatedata\r\n| summarize by Month = format_datetime(timestamp, \"yyyy-MM\")\r\n| join kind=leftouter (Retained) on Month\r\n| join kind=leftouter (ActiveUsersLastMonth | summarize ActiveUsers=dcount(ActiveUser) by Month=format_datetime(Month, \"yyyy-MM\")) on Month\r\n| extend Retention = RetainedUsers * 1.0 / ActiveUsers\r\n| project Month, Retention=coalesce(case(isnan(Retention), 0.0, Retention), 0.0)\r\n| order by Month asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Retention (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Month",
                      "yAxis": [
                        "Retention"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true,
                      "xSettings": {
                        "numberFormatSettings": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": true
                          }
                        }
                      },
                      "ySettings": {
                        "numberFormatSettings": {
                          "unit": 0,
                          "options": {
                            "style": "percent",
                            "useGrouping": true,
                            "minimumSignificantDigits": 3,
                            "maximumSignificantDigits": 3
                          }
                        }
                      }
                    }
                  },
                  "customWidth": "34",
                  "name": "Retention (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "Cadence",
              "comparison": "isEqualTo",
              "value": "Monthly"
            },
            "name": "Feature Monthly"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "items": [
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let data = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n| extend Month = format_datetime(timestamp, \"yyyy-MM\"), Day = startofday(timestamp)\r\n;\r\nlet FeatureDAU = data\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| summarize DAU = dcount(user_AuthenticatedId) by Day\r\n;\r\ndata\r\n| summarize by Day\r\n| join kind=leftouter (FeatureDAU) on Day\r\n| project Day, DAU=coalesce(DAU, 0)\r\n| order by Day asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Active Users (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Day",
                      "yAxis": [
                        "DAU"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true
                    }
                  },
                  "customWidth": "33",
                  "name": "Active Users (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let userFirstAware = customEvents\r\n| where tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| summarize FirstAware=startofday(min(timestamp)) by user_AuthenticatedId\r\n;\r\ncustomEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n| summarize by Day=startofday(timestamp)\r\n| join kind=leftouter (userFirstAware) on $left.Day==$right.FirstAware\r\n| summarize [\"Net New Active Users\"]=coalesce(dcountif(user_AuthenticatedId, isnotempty(user_AuthenticatedId)), 0) by Day\r\n| order by Day asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Net New Active Users (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Day",
                      "yAxis": [
                        "Net New Active Users"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true
                    }
                  },
                  "customWidth": "33",
                  "name": "Net New Active Users (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n| extend Day = startofday(timestamp)\r\n;\r\nlet DailyFeatureInteractions = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| summarize DailyInteractions=count() by Day, user_AuthenticatedId\r\n| summarize DailyMedianInteractions = percentile(DailyInteractions, 50) by Day\r\n;\r\ndatedata\r\n| summarize by Day\r\n| join kind=leftouter (DailyFeatureInteractions) on Day\r\n| project Day, [\"Daily Interactions\"]=coalesce(DailyMedianInteractions, 0)\r\n| order by Day asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Median Interactions",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Day",
                      "yAxis": [
                        "Daily Interactions"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true
                    }
                  },
                  "customWidth": "33",
                  "name": "Median Interactions",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet ActiveUserLastDay = data\r\n| summarize by Day = startofday(datetime_add(\"day\", 1, timestamp)), ActiveUser = user_AuthenticatedId\r\n;\r\nlet Retained = data\r\n| summarize by Day = startofday(timestamp), ActiveUser = user_AuthenticatedId\r\n| join kind = inner (ActiveUserLastDay) on Day, ActiveUser\r\n| summarize RetainedUsers=dcount(ActiveUser) by Day\r\n;\r\ndatedata\r\n| summarize by Day = startofday(timestamp)\r\n| join kind=leftouter (Retained) on Day\r\n| project Day, [\"Retained Users\"]=coalesce(RetainedUsers, 0)\r\n| order by Day asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Retained Users (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Day",
                      "yAxis": [
                        "Retained Users"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true,
                      "xSettings": {
                        "numberFormatSettings": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": true
                          }
                        }
                      }
                    }
                  },
                  "customWidth": "33",
                  "name": "Retained Users (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n;\r\nlet data = datedata\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId) and tostring(customDimensions.parentId) in ({Feature})\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet ActiveUsersLastDay = data\r\n| summarize by Day = startofday(datetime_add(\"day\", 1, timestamp)), ActiveUser = user_AuthenticatedId\r\n;\r\nlet Retained = data\r\n| summarize by Day = startofday(timestamp), ActiveUser = user_AuthenticatedId\r\n| join kind = inner (ActiveUsersLastDay) on Day, ActiveUser\r\n| summarize RetainedUsers=dcount(ActiveUser) by Day\r\n;\r\ndatedata\r\n| summarize by Day = startofday(timestamp)\r\n| join kind=leftouter (Retained) on Day\r\n| join kind=leftouter (ActiveUsersLastDay | summarize ActiveUsers=dcount(ActiveUser) by Day) on Day\r\n| extend Retention = RetainedUsers * 1.0 / ActiveUsers\r\n| project Day, Retention=coalesce(case(isnan(Retention), 0.0, Retention), 0.0)\r\n| order by Day asc",
                    "size": 1,
                    "aggregation": 5,
                    "title": "Retention (Feature)",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "linechart",
                    "chartSettings": {
                      "xAxis": "Day",
                      "yAxis": [
                        "Retention"
                      ],
                      "group": null,
                      "createOtherGroup": 0,
                      "showDataPoints": true,
                      "xSettings": {
                        "numberFormatSettings": {
                          "unit": 0,
                          "options": {
                            "style": "decimal",
                            "useGrouping": true
                          }
                        }
                      },
                      "ySettings": {
                        "numberFormatSettings": {
                          "unit": 0,
                          "options": {
                            "style": "percent",
                            "useGrouping": true,
                            "minimumSignificantDigits": 3,
                            "maximumSignificantDigits": 3
                          }
                        }
                      }
                    }
                  },
                  "customWidth": "33",
                  "name": "Retention (Feature)",
                  "styleSettings": {
                    "showBorder": true
                  }
                }
              ]
            },
            "conditionalVisibility": {
              "parameterName": "Cadence",
              "comparison": "isEqualTo",
              "value": "Daily"
            },
            "name": "Feature Daily"
          },
          {
            "type": 1,
            "content": {
              "json": "---"
            },
            "name": "Feature Section Separator"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Feature"
      },
      "name": "Feature Metrics"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "let datedata = customEvents\r\n| where timestamp >= todatetime(\"{Time:value}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| extend Month = startofmonth(timestamp), Day = startofday(timestamp)\r\n;\r\nlet dailyFeatureId = datedata\r\n| extend Id = coalesce(tostring(customDimensions.parentId), \"No parentId\")\r\n         ,ParentId=coalesce(tostring(customDimensions.pageName), \"No pageName\")\r\n| summarize FeatureDAU = dcountif(user_AuthenticatedId, isnotempty(customDimensions.actionType)) by ParentId, Id, Month, Day\r\n| summarize DAU = percentile(FeatureDAU, 50) by ParentId, Id\r\n;\r\nlet dailyFeatureParentId = datedata\r\n| extend ParentId=coalesce(tostring(customDimensions.pageName), \"No pageName\")\r\n| summarize FeatureDAU = dcountif(user_AuthenticatedId, isnotempty(customDimensions.actionType)) by ParentId, Month, Day\r\n| summarize DAU = percentile(FeatureDAU, 50) by ParentId\r\n;\r\nlet monthlyFeatureId = datedata\r\n| extend Id = coalesce(tostring(customDimensions.parentId), \"No parentId\")\r\n         ,ParentId=coalesce(tostring(customDimensions.pageName), \"No pageName\")\r\n| summarize FeatureMAU = dcountif(user_AuthenticatedId, isnotempty(customDimensions.actionType)) by ParentId, Id, Month\r\n| summarize MAU = percentile(FeatureMAU, 50) by ParentId, Id\r\n;\r\nlet monthlyFeatureParentId = datedata\r\n| extend ParentId=coalesce(tostring(customDimensions.pageName), \"No pageName\")\r\n| summarize FeatureMAU = dcountif(user_AuthenticatedId, isnotempty(customDimensions.actionType)) by ParentId, Month\r\n| summarize MAU = percentile(FeatureMAU, 50) by ParentId\r\n;\r\ndatedata\r\n| where isnotempty(user_AuthenticatedId)\r\n| extend parentId = tostring(customDimensions.parentId)\r\n| extend pageName = tostring(customDimensions.pageName)\r\n| summarize ActiveUsers=dcountif(user_AuthenticatedId, isnotempty(parentId)) by ParentId=coalesce(pageName, \"No pageName\"), Id=coalesce(parentId, \"No parentId\")\r\n| extend Name = Id\r\n| order by ParentId, ActiveUsers\r\n| extend RN = row_number(1, prev(ParentId) != ParentId)\r\n| where RN < 11\r\n| join kind=inner(dailyFeatureId | project Id, ParentId, DAU) on Id, ParentId\r\n| join kind=inner(monthlyFeatureId | project Id, ParentId, MAU) on Id, ParentId\r\n| union (\r\n    customEvents\r\n    | where timestamp >= todatetime(\"{Time:value}\")\r\n        and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n        and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n        and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n    | extend parentId = tostring(customDimensions.parentId)\r\n    | extend pageName = tostring(customDimensions.pageName)\r\n    | summarize AwareUsers=dcount(user_AuthenticatedId, 4), ActiveUsers=dcountif(user_AuthenticatedId, isnotempty(parentId)) by ParentId='', Id=coalesce(pageName, \"No pageName\")\r\n    | extend Name=Id\r\n    | join kind=inner(dailyFeatureParentId | project ParentId, DAU) on $left.Id==$right.ParentId\r\n    | join kind=inner(monthlyFeatureParentId | project ParentId, MAU) on $left.Id==$right.ParentId\r\n)\r\n| project Feature=Name, [\"Active Users\"]=ActiveUsers, Id, ParentId, DAU, MAU, [\"Intensity (DAU/MAU)\"]=(DAU)*1.0/(MAU)\r\n| order by [\"Active Users\"] desc",
        "size": 0,
        "title": "Users by Feature",
        "queryType": 0,
        "resourceType": "microsoft.insights/components",
        "visualization": "table",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Active Users",
              "formatter": 3,
              "formatOptions": {
                "min": 0,
                "palette": "blue"
              }
            },
            {
              "columnMatch": "Id",
              "formatter": 5
            },
            {
              "columnMatch": "ParentId",
              "formatter": 5
            },
            {
              "columnMatch": "DAU",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "10ch"
              }
            },
            {
              "columnMatch": "MAU",
              "formatter": 0,
              "formatOptions": {
                "customColumnWidthSetting": "10ch"
              }
            },
            {
              "columnMatch": "Intensity (DAU/MAU)",
              "formatter": 0,
              "numberFormat": {
                "unit": 0,
                "options": {
                  "style": "percent",
                  "useGrouping": false,
                  "minimumSignificantDigits": 2,
                  "maximumSignificantDigits": 2
                }
              }
            }
          ],
          "rowLimit": 100,
          "hierarchySettings": {
            "idColumn": "Id",
            "parentColumn": "ParentId",
            "treeType": 0,
            "expanderColumn": "Feature",
            "expandTopLevel": true
          }
        },
        "sortBy": []
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Feature"
      },
      "customWidth": "100",
      "name": "Users by Feature",
      "styleSettings": {
        "showBorder": true
      }
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Telemetry Requirements",
              "expandable": true,
              "expanded": true,
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "## Click Analytics for Application Insights\r\nThe HEART Framework uses the [Click Analytics plugin for Application Insights](https://docs.microsoft.com/en-us/azure/azure-monitor/app/javascript-click-analytics-plugin). To calculate HEART Metrics, the **Click Analytics plugin must be implemented on this experience's telemetry**."
                  },
                  "name": "text - 12"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "## Data Dictionary\r\nThe required attributes to calculate HEART metrics are listed below."
                  },
                  "name": "Data Dictionary Title"
                },
                {
                  "type": 1,
                  "content": {
                    "json": "| Source          | Attribute            | Description                                |\r\n|-----------------|----------------------|--------------------------------------------|\r\n| customEvents    | user_AuthenticatedId | unique user identifier                     |\r\n| customEvents    | session_Id           | unique session identifier                  |\r\n| customEvents    | appName              | unique Application Insights app identifier |\r\n| customEvents    | itemType             | category of customEvents record            |\r\n| customEvents    | timestamp            | datetime of event                          |\r\n| customEvents    | operation_Id         | correlate telemetry events                 |\r\n| customEvents*   | parentId             | name of feature                            |\r\n| customEvents*   | pageName             | name of page                               |\r\n| customEvents*   | actionType           | category of Click Analytics record         |\r\n| pageViews       | user_AuthenticatedId | unique user identifier                     |\r\n| pageViews       | session_Id           | unique session identifier                  |\r\n| pageViews       | appName              | unique Application Insights app identifier |\r\n| pageViews       | timestamp            | datetime of event                          |\r\n| pageViews       | operation_Id         | correlate telemetry events                 |\r\n\r\n*The [Click Analytics plugin](https://docs.microsoft.com/en-us/azure/azure-monitor/app/javascript-click-analytics-plugin) must be implemented to emit these attributes."
                  },
                  "name": "customEvents Data Dictionary"
                }
              ]
            },
            "name": "Telemetry Requirements"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Telemetry Warnings",
              "expandable": true,
              "expanded": true,
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "## Telemetry Warnings\r\nCommon data discrepancies, along with their suggestion resolutions, are listed below."
                  },
                  "name": "Telemetry Warnings Title"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let WarningCodes = datatable (Code:long, Warning:string, Resolution:string)\r\n    [0, \"No Warning\", \"None\",\r\n     1, \"⚠️ No user rows found in selected time period.\", \"Ensure telemetry is authenticating users in the selected time period.\",\r\n     2, \"⚠️ Multiple users found in the same session.\", \"Check if telemetry is creating sessions without authenticating users.\",\r\n     3, \"️️️⚠️ Row(s) in customEvents with actionType value but no user_AuthenticatedId\", \"At least one click has been emitted without a user id. Check if telemetry is creating sessions without authenticating users.\",\r\n     4, \"⚠️ Row(s) in customEvents with user_AuthenticatedId but no actionType value.\", \"Visit the Click Analytics documentation for more information about its implementation.\",\r\n     5, \"⚠️ Users with actionType items but no pageView items\", \"At least 1 user has a click event without a pageView event. Implement pageViews and Click Analytics on the same pages of the experience.\"]\r\n;\r\nlet data = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n;\r\nlet Code1Check = data\r\n| summarize Occurrences=countif(isnotempty(user_AuthenticatedId)), Total=count()\r\n| project Code = case(Occurrences == 0, 1, 0), Occurrences, Units=\"Row(s)\", Total\r\n;\r\nlet Code2Check = data\r\n| summarize UserCount=dcount(user_AuthenticatedId, 4) by session_Id\r\n| summarize Occurrences=countif(UserCount > 1), Total=count()\r\n| project Code = case(Occurrences > 0, 2, 0), Occurrences, Units=\"Session(s)\", Total\r\n;\r\nlet Code3Check = data\r\n| summarize Occurrences=countif(isnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)), Total=count()\r\n| project Code = case(Occurrences > 0, 3, 0), Occurrences, Units=\"Row(s)\", Total\r\n;\r\nlet Code4Check = data\r\n| summarize Occurrences=countif(isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)), Total=count()\r\n| project Code = case(Occurrences > 0, 4, 0), Occurrences, Units=\"Row(s)\", Total\r\n;\r\nlet Code5Check = data\r\n| where isnotnull(customDimensions.actionType) and isnotempty(user_AuthenticatedId)\r\n| join kind = leftanti (pageViews | where itemType == \"pageView\" and isnotempty(user_AuthenticatedId) | distinct user_AuthenticatedId) \r\non user_AuthenticatedId\r\n| summarize Occurrences = dcount(user_AuthenticatedId, 4), One=1\r\n| join kind=inner (customEvents| union pageViews| summarize Total=dcount(user_AuthenticatedId), One=1)\r\non One\r\n| project Code = case(Occurrences > 0, 5, 0), Occurrences, Units=\"User(s)\", Total\r\n;\r\nunion Code1Check, Code2Check, Code3Check, Code4Check, Code5Check\r\n| join (WarningCodes) on Code\r\n| where Code > 0\r\n| project Warning, Occurrences=strcat(Occurrences, \" \", Units), Pct = Occurrences*1.0 / Total, [\"Suggested Resolution\"] = Resolution\r\n| order by Pct desc\r\n\r\n",
                    "size": 1,
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "Warning",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "60ch"
                          }
                        },
                        {
                          "columnMatch": "Pct",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "10ch"
                          },
                          "numberFormat": {
                            "unit": 0,
                            "options": {
                              "style": "percent",
                              "useGrouping": false,
                              "minimumSignificantDigits": 3,
                              "maximumSignificantDigits": 3
                            }
                          }
                        },
                        {
                          "columnMatch": "Suggested Resolution",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "118ch"
                          }
                        }
                      ]
                    }
                  },
                  "customWidth": "100",
                  "name": "Telemetry Warnings"
                }
              ]
            },
            "name": "Telemetry Warnings"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Data Validation",
              "expandable": true,
              "expanded": true,
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "## Data Validation\r\nThe Attribute Completion grids below display the Completion % of the required attributes for the HEART Framework. Note that **these grids only consider records with a non-empty user_AuthenticatedId** to disregard any user-initited back-end events.\r\n### How do I interpret Completion? Is 100% necessary to calculate HEART Metrics? \r\nCompletion represents the proportion of records with a value. For example, a Completion of 25% for parentId means that 75% of records have no value. For the most informed product decisions, Completion above 90% is recommended for each required attribute. HEART Metrics can still be calculated with lower Completion; however, lower Completion could result in HEART Metrics calculated on an unrepresentative dataset."
                  },
                  "name": "Technical Requirements Text"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "let customEventsPack = customEvents \r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| where isnotempty(user_AuthenticatedId)\r\n| project array = pack_array(*), Dummy = 1\r\n;\r\nlet customEventsAttributes = customEvents\r\n| getschema \r\n| project ColumnName, ColumnOrdinal, Dummy = 1\r\n| join kind = inner (customEventsPack) on Dummy\r\n| project ColumnName, value = tostring(array[ColumnOrdinal])\r\n| where ColumnName in (\"user_AuthenticatedId\", \"session_Id\", \"appName\", \"itemType\", \"timestamp\", \"operation_Id\")\r\n| summarize Complete=countif(value !in (\"\", \"not_specified\")), Rows=count() by ColumnName\r\n| project Source=\"customEvents\", Implementation=\"default\", Attribute=ColumnName, Rows, Complete\r\n;\r\nlet UnpackCD = customEvents\r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| where isnotempty(user_AuthenticatedId)\r\n| project customDimensions\r\n| evaluate bag_unpack(customDimensions)\r\n;\r\nlet ClickAnalyticsAttributes = UnpackCD\r\n| getschema \r\n| project ColumnName, ColumnOrdinal, Dummy = 1\r\n| join kind = inner (UnpackCD | project array = pack_array(*), Dummy = 1) on Dummy\r\n| project ColumnName, value = tostring(array[ColumnOrdinal])\r\n| where ColumnName in (\"parentId\", \"pageName\", \"actionType\")\r\n| summarize Complete=countif(value !in (\"\", \"not_specified\")), Rows=count() by ColumnName\r\n| project Source=\"customEvents\", Implementation=\"Click Analytics\", Attribute=ColumnName, Rows, Complete\r\n;\r\nlet pageViewsPack = pageViews \r\n| where timestamp >= todatetime(\"{Time}\")\r\n    and ( client_CountryOrRegion in ({Country}) or \"*\" in ({Country}) )\r\n    and ( client_OS in ({OS}) or \"*\" in ({OS}) )\r\n    and ( client_Browser in ({Browser}) or \"*\" in ({Browser}) )\r\n| where isnotempty(user_AuthenticatedId)\r\n| project array = pack_array(*), Dummy = 1\r\n;\r\nlet pageViewsAttributes=pageViews\r\n| getschema \r\n| project ColumnName, ColumnOrdinal, Dummy = 1\r\n| join kind = inner (pageViewsPack) on Dummy\r\n| project ColumnName, value = tostring(array[ColumnOrdinal])\r\n| where ColumnName in (\"user_AuthenticatedId\", \"session_Id\", \"appName\", \"timestamp\", \"operation_Id\")\r\n| summarize Complete=countif(value !in (\"\", \"not_specified\")), Rows=count() by ColumnName\r\n| project Source=\"pageViews\", Implementation=\"default\", Attribute=ColumnName, Rows, Complete\r\n;\r\nunion customEventsAttributes, ClickAnalyticsAttributes, pageViewsAttributes\r\n| extend Completion = Complete * 1.0 / Rows\r\n| project Status=case(Completion >= 0.90, '✔️ Good', '⚠️ Low Completion'), Source, Implementation, Attribute, Completion=coalesce(case(isnan(Completion), 0.0, Completion ), 0.0), Complete, Rows\r\n| order by Completion asc, Source asc, Implementation asc, Attribute asc\r\n",
                    "size": 0,
                    "title": "Attribute Completion",
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components",
                    "visualization": "table",
                    "gridSettings": {
                      "formatters": [
                        {
                          "columnMatch": "ColumnName",
                          "formatter": 0,
                          "formatOptions": {
                            "customColumnWidthSetting": "26ch"
                          }
                        },
                        {
                          "columnMatch": "Completion",
                          "formatter": 3,
                          "formatOptions": {
                            "min": 0,
                            "max": 1,
                            "palette": "blue"
                          },
                          "numberFormat": {
                            "unit": 0,
                            "options": {
                              "style": "percent",
                              "minimumSignificantDigits": 2,
                              "maximumSignificantDigits": 2
                            }
                          }
                        }
                      ]
                    }
                  },
                  "customWidth": "100",
                  "name": "Attribute Completion"
                }
              ]
            },
            "name": "Data Validation"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Data Retention",
              "expandable": true,
              "expanded": true,
              "items": [
                {
                  "type": 1,
                  "content": {
                    "json": "## Data Retention\r\nLearn more about data retention in the [Application Insights documentation](https://docs.microsoft.com/en-us/azure/azure-monitor/app/pricing#change-the-data-retention-period). For the most informed product decisions, at least 13 months of data is recommended to consider seasonality and year-over-year growth. "
                  },
                  "name": "Data Retention"
                },
                {
                  "type": 3,
                  "content": {
                    "version": "KqlItem/1.0",
                    "query": "customEvents\r\n| summarize [\"First Record\"]=min(timestamp), [\"Most Recent Record\"]=max(timestamp) by appName\r\n| order by [\"Most Recent Record\"] desc",
                    "size": 4,
                    "queryType": 0,
                    "resourceType": "microsoft.insights/components"
                  },
                  "name": "Records"
                }
              ]
            },
            "name": "Data Retention"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "Tab",
        "comparison": "isEqualTo",
        "value": "Technical"
      },
      "name": "Technical Validation"
    }
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
